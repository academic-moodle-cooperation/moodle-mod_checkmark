{"version":3,"file":"quickgrade.min.js","sources":["../src/quickgrade.js"],"sourcesContent":["define(['jquery', 'core/str'], function($, str) {\n\n    var State = function(name, state) {\n        this.name = name;\n        this.state = state;\n    };\n\n    var Quickgrade = function(originalState) {\n        this.originalState = originalState;\n    };\n\n    Quickgrade.prototype.toogleOverwiteHint = function(element) {\n        if ($(element).hasClass('exborder')) {\n            $(element).removeClass('exborder');\n        } else {\n            $(element).addClass('exborder');\n        }\n\n    };\n\n    Quickgrade.prototype.calculateSum = function(line) {\n        var sum = 0;\n        $('input.checkline' + line).each(function() {\n            if ($(this).is(':checked')) {\n                var classname = $(this).attr('class');\n                var classes = classname.split(' ');\n                classes.forEach(function(value) {\n                    if (value.startsWith(\"$\")) {\n                        sum += parseFloat(value.substring(1));\n                    }\n                });\n            }\n        });\n        return sum;\n    };\n    Quickgrade.prototype.setPoints = function(line, points) {\n        $('#menumenu' + line).val(points);\n\n        var strings = [\n            {\n                key: 'strautograded',\n                component: 'checkmark'\n            },\n        ];\n        str.get_strings(strings).then(function(results) {\n            $('#feedback' + line).text(results[0]);\n        });\n    };\n\n    Quickgrade.prototype.resetFeedback = function() {\n        $('#id_feedback_editoreditable:first-child').text('');\n    };\n    return {\n        init: function() {\n            var originalState = [];\n            $('.overwritetag').each(function() {\n                originalState.push(new State(this.getAttribute('class'), this.style.display !== 'none'));\n            });\n            var quickgrade = new Quickgrade(originalState);\n            $(document).ready(function() {\n                $('input.examplecheck').change(function(event) {\n                    var line = event.target.attributes.value.nodeValue;\n                    quickgrade.setPoints(line, quickgrade.calculateSum(line));\n                    quickgrade.toogleOverwiteHint(event.target.parentElement.lastChild);\n                });\n                /*\n                $('#id_xgrade').change(grading.resetFeedback);\n                $('#id_resetbutton').click(grading.resetOverwrite);\n                */\n            });\n\n        }\n    };\n});"],"names":["define","$","str","State","name","state","Quickgrade","originalState","prototype","toogleOverwiteHint","element","hasClass","removeClass","addClass","calculateSum","line","sum","each","this","is","attr","split","forEach","value","startsWith","parseFloat","substring","setPoints","points","val","get_strings","key","component","then","results","text","resetFeedback","init","push","getAttribute","style","display","quickgrade","document","ready","change","event","target","attributes","nodeValue","parentElement","lastChild"],"mappings":"AAAAA,kCAAO,CAAC,SAAU,aAAa,SAASC,EAAGC,SAEnCC,MAAQ,SAASC,KAAMC,YAClBD,KAAOA,UACPC,MAAQA,OAGbC,WAAa,SAASC,oBACjBA,cAAgBA,sBAGzBD,WAAWE,UAAUC,mBAAqB,SAASC,SAC3CT,EAAES,SAASC,SAAS,YACpBV,EAAES,SAASE,YAAY,YAEvBX,EAAES,SAASG,SAAS,aAK5BP,WAAWE,UAAUM,aAAe,SAASC,UACrCC,IAAM,SACVf,EAAE,kBAAoBc,MAAME,MAAK,WACzBhB,EAAEiB,MAAMC,GAAG,aACKlB,EAAEiB,MAAME,KAAK,SACLC,MAAM,KACtBC,SAAQ,SAASC,OACjBA,MAAMC,WAAW,OACjBR,KAAOS,WAAWF,MAAMG,UAAU,WAK3CV,KAEXV,WAAWE,UAAUmB,UAAY,SAASZ,KAAMa,QAC5C3B,EAAE,YAAcc,MAAMc,IAAID,QAQ1B1B,IAAI4B,YANU,CACV,CACIC,IAAK,gBACLC,UAAW,eAGMC,MAAK,SAASC,SACnCjC,EAAE,YAAcc,MAAMoB,KAAKD,QAAQ,QAI3C5B,WAAWE,UAAU4B,cAAgB,WACjCnC,EAAE,2CAA2CkC,KAAK,KAE/C,CACHE,KAAM,eACE9B,cAAgB,GACpBN,EAAE,iBAAiBgB,MAAK,WACpBV,cAAc+B,KAAK,IAAInC,MAAMe,KAAKqB,aAAa,SAAiC,SAAvBrB,KAAKsB,MAAMC,iBAEpEC,WAAa,IAAIpC,WAAWC,eAChCN,EAAE0C,UAAUC,OAAM,WACd3C,EAAE,sBAAsB4C,QAAO,SAASC,WAChC/B,KAAO+B,MAAMC,OAAOC,WAAWzB,MAAM0B,UACzCP,WAAWf,UAAUZ,KAAM2B,WAAW5B,aAAaC,OACnD2B,WAAWjC,mBAAmBqC,MAAMC,OAAOG,cAAcC"}