{"version":3,"file":"quickgrade.min.js","sources":["../src/quickgrade.js"],"sourcesContent":["define(['jquery', 'core/str'], function ($, str) {\n\n    var State = function (name,state) {\n        this.name = name;\n        this.state = state;\n    };\n\n    var Quickgrade = function () {\n    };\n\n    Quickgrade.prototype.toogleOverwiteHint = function (element) {\n        if($(element).hasClass('exborder')) {\n            $(element).removeClass('exborder');\n        } else {\n            $(element).addClass('exborder');\n        }\n\n    };\n\n    Quickgrade.prototype.calculateSum = function (line) {\n        var sum = 0;\n        $('input.checkline' + line).each(function () {\n            if($(this).is(':checked')) {\n                var classname = $(this).attr('class');\n                var classes = classname.split(' ');\n                classes.forEach(function (value) {\n                    if (value.startsWith(\"$\")) {\n                        sum += parseFloat(value.substring(1));\n                    }\n                });\n            }\n        });\n        return sum;\n    };\n    Quickgrade.prototype.setPoints = function (line,points) {\n        $('#menumenu' + line).val(points);\n\n        var strings = [\n            {\n                key: 'strautograded',\n                component: 'checkmark'\n            },\n        ];\n        str.get_strings(strings).then(function (results) {\n            $('#feedback' + line).text(results[0]);\n        });\n\n    };\n\n    Quickgrade.prototype.resetFeedback = function () {\n        $('#id_feedback_editoreditable:first-child').text('');\n    };\n    return {\n        init: function () {\n            var originalState = [];\n            $('.overwritetag').each(function() {\n                originalState.push(new State(this.getAttribute('class'),this.style.display !== 'none'));\n            });\n            var quickgrade = new Quickgrade(originalState);\n            quickgrade.originalState = originalState;\n            $(document).ready(function () {\n                $('input.examplecheck').change(function (event) {\n                    var line = event.target.attributes['value'].nodeValue;\n                    quickgrade.setPoints(line,quickgrade.calculateSum(line));\n                    quickgrade.toogleOverwiteHint(event.target.parentElement.lastChild);\n                });\n                /*\n                $('#id_xgrade').change(grading.resetFeedback);\n                $('#id_resetbutton').click(grading.resetOverwrite);\n                */\n            });\n\n        }\n    };\n});"],"names":["define","$","str","State","name","state","Quickgrade","prototype","toogleOverwiteHint","element","hasClass","removeClass","addClass","calculateSum","line","sum","each","this","is","attr","split","forEach","value","startsWith","parseFloat","substring","setPoints","points","val","get_strings","key","component","then","results","text","resetFeedback","init","originalState","push","getAttribute","style","display","quickgrade","document","ready","change","event","target","attributes","nodeValue","parentElement","lastChild"],"mappings":"AAAAA,OAAM,2BAAC,CAAC,SAAU,aAAa,SAAUC,EAAGC,KAExC,IAAIC,MAAQ,SAAUC,KAAKC,OAClBD,KAAAA,KAAOA,KACPC,KAAAA,MAAQA,OAGbC,WAAa,aA6CV,OA1CPA,WAAWC,UAAUC,mBAAqB,SAAUC,SAC7CR,EAAEQ,SAASC,SAAS,YACnBT,EAAEQ,SAASE,YAAY,YAEvBV,EAAEQ,SAASG,SAAS,aAK5BN,WAAWC,UAAUM,aAAe,SAAUC,MACtCC,IAAAA,IAAM,EAYV,OAXAd,EAAE,kBAAoBa,MAAME,MAAK,WAC1Bf,EAAEgB,MAAMC,GAAG,aACMjB,EAAEgB,MAAME,KAAK,SACLC,MAAM,KACtBC,SAAQ,SAAUC,OAClBA,MAAMC,WAAW,OACjBR,KAAOS,WAAWF,MAAMG,UAAU,WAK3CV,KAEXT,WAAWC,UAAUmB,UAAY,SAAUZ,KAAKa,QAC5C1B,EAAE,YAAca,MAAMc,IAAID,QAQ1BzB,IAAI2B,YANU,CACV,CACIC,IAAK,gBACLC,UAAW,eAGMC,MAAK,SAAUC,SACpChC,EAAE,YAAca,MAAMoB,KAAKD,QAAQ,QAK3C3B,WAAWC,UAAU4B,cAAgB,WACjClC,EAAE,2CAA2CiC,KAAK,KAE/C,CACHE,KAAM,WACEC,IAAAA,cAAgB,GACpBpC,EAAE,iBAAiBe,MAAK,WACpBqB,cAAcC,KAAK,IAAInC,MAAMc,KAAKsB,aAAa,SAAgC,SAAvBtB,KAAKuB,MAAMC,aAEvE,IAAIC,WAAa,IAAIpC,WAAW+B,eAChCK,WAAWL,cAAgBA,cAC3BpC,EAAE0C,UAAUC,OAAM,WACd3C,EAAE,sBAAsB4C,QAAO,SAAUC,OACjChC,IAAAA,KAAOgC,MAAMC,OAAOC,WAAb,MAAiCC,UAC5CP,WAAWhB,UAAUZ,KAAK4B,WAAW7B,aAAaC,OAClD4B,WAAWlC,mBAAmBsC,MAAMC,OAAOG,cAAcC"}