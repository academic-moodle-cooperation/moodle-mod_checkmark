{"version":3,"file":"utils.min.js","sources":["../src/utils.js"],"sourcesContent":["define(['jquery', 'core/str'], function ($, str) {\n\n    var Utils = function () {\n        this.baseurl = M.cfg.wwwroot + \"/mod/checkmark/handlehideall.php\";\n    };\n    var baseurl;\n\n    Utils.prototype.toggleExamples = function (show) {\n        if (show) {\n            this.getForAllExamples('false');\n        } else {\n            this.getForAllExamples('true');\n        }\n    };\n\n    Utils.prototype.getForAllExamples = function (key) {\n        var allexamples = this.getExampleSelectors();\n        $.ajax({\n            url: baseurl,\n            data: {\n                hide: key,\n                columns: allexamples\n            },\n            statusCode: {\n                200: function () {\n                    var url = window.location.href;\n                    url = url.replace(/thide=[a-z0-9]+/, '') /* Removes thide=....3242 !*/\n                             .replace(/tshow=[a-z0-9]+/, '') /* Removes tshow=....3432 ! */\n                             .replace(/\\?&/, '?') /* Removes accidentally left ?&.. */\n                             .replace(/&&/, '&') /* Removes accidentally left &&.. */\n                             .replace(/&$/, ''); /* Removes trailing &.. */\n                    window.location.replace(url);\n                }\n            }\n        });\n    };\n\n    Utils.prototype.getExampleSelectors = function () {\n        var allexamples = [];\n\n        $(\"th.colexample\").each(function () {\n\n            var classes = $(this).attr(\"class\");\n            var classes_arr = classes.split(\" \");\n            classes_arr.forEach(function (value) {\n                if (value.startsWith(\"example\")) {\n                    allexamples.push(value);\n                }\n            });\n        });\n        return allexamples;\n    };\n    Utils.prototype.allExamplesCollapsed = function () {\n        return $('th.colexample > .commands').length === 0;\n    };\n    Utils.prototype.getBaseUrl = function () {\n        return this.baseurl;\n    };\n    Utils.prototype.clearPointerEventsFromIcons = function () {\n        $('.fa-minus,.fa-plus').css('pointer-events','none');\n    };\n    return {\n        init: function () {\n            var utils = new Utils();\n            var showallContainer = '<th><div id=\"showallcontainer\">';\n            showallContainer += '<a id=\"showall\" href=\"javascript:void(0)\">' +\n                '<i class=\"icon fa fa-plus fa-fw \" id=\"showalltoggle\"></i></a>';\n            showallContainer += '</div></th>';\n            $('th.timesubmitted').after(showallContainer);\n            var showallPlaceholder = '<td></td>';\n            $('td.timesubmitted').after(showallPlaceholder);\n\n\n            /*\n            The additional div and position: absolute is necessary so the tag is not becoming\n            part of the flow of the example column thus making it bigger than the others\n             */\n            var hideallContainer = '<div id=\"hideallcontainer\" style=\"position: absolute\">';\n            hideallContainer += '<span id=\"hidealllabel\" style=\"margin-right: 5px\"></span>';\n            hideallContainer += '<a id=\"hideall\" href=\"javascript:void(0);\">';\n            hideallContainer += '<i class=\"icon fa fa-minus fa-fw \" id=\"hidealltoggle\"></i></a>';\n            hideallContainer += '</div><div>&nbsp;</div>';\n            $('th.colexample:eq(0)').prepend(hideallContainer);\n\n            var showallColgroup = '<colgroup class=\"showall\" span=\"1\"><col></colgroup>';\n            $('colgroup.timesubmitted').after(showallColgroup);\n\n            var strings = [ {\n                    key: 'showalltoggle',\n                    component: 'checkmark'\n                },{\n                    key: 'hidealltoggle',\n                    component: 'checkmark'\n                },{\n                    key: 'strexamples',\n                    component: 'checkmark'\n                }\n            ];\n\n            str.get_strings(strings).then(function (results) {\n                $('#showall').prop('aria-label', results[0]).prop('title', results[0]);\n                $('#hideall').prop('aria-label', results[1]).prop('title', results[1]);\n                $('#hidealllabel').text(results[2]);\n            });\n\n            if ($(\"th.colexample\").length > 0 && !utils.allExamplesCollapsed()) {\n                $('#hideallcontainer').show();\n                $('#showallcontainer').hide();\n            } else {\n                $('#hideallcontainer').hide();\n                $(\".colexample\").hide();\n                $('#showallcontainer').show();\n                $('colgroup.examples').hide();\n            }\n\n            $(document).ready(function () {\n                $('#hideall').click(function () {\n                    utils.toggleExamples(false);\n                });\n                $('#showall').click(function () {\n                    utils.toggleExamples(true);\n                });\n                utils.clearPointerEventsFromIcons();\n            }\n\n            );\n            baseurl = utils.getBaseUrl();\n        }\n    };\n});\n"],"names":["define","$","str","Utils","baseurl","M","cfg","wwwroot","prototype","toggleExamples","show","getForAllExamples","key","allexamples","this","getExampleSelectors","ajax","url","data","hide","columns","statusCode","window","location","href","replace","each","attr","split","forEach","value","startsWith","push","allExamplesCollapsed","length","getBaseUrl","clearPointerEventsFromIcons","css","init","utils","after","showallContainer","prepend","hideallContainer","get_strings","component","then","results","prop","text","document","ready","click"],"mappings":"AAAAA,OAAM,sBAAC,CAAC,SAAU,aAAa,SAAUC,EAAGC,KAEpCC,IAGAC,QAHAD,MAAQ,WACHC,KAAAA,QAAUC,EAAEC,IAAIC,QAAU,oCA0D5B,OAtDPJ,MAAMK,UAAUC,eAAiB,SAAUC,MACnCA,KACKC,KAAAA,kBAAkB,SAElBA,KAAAA,kBAAkB,SAI/BR,MAAMK,UAAUG,kBAAoB,SAAUC,KAC1C,IAAIC,YAAcC,KAAKC,sBACvBd,EAAEe,KAAK,CACHC,IAAKb,QACLc,KAAM,CACFC,KAAMP,IACNQ,QAASP,aAEbQ,WAAY,CACR,IAAK,WACD,IAAIJ,IAAMK,OAAOC,SAASC,KAC1BP,IAAMA,IAAIQ,QAAQ,kBAAmB,IAC3BA,QAAQ,kBAAmB,IAC3BA,QAAQ,MAAO,KACfA,QAAQ,KAAM,KACdA,QAAQ,KAAM,IACxBH,OAAOC,SAASE,QAAQR,UAMxCd,MAAMK,UAAUO,oBAAsB,WAC9BF,IAAAA,YAAc,GAYlB,OAVAZ,EAAE,iBAAiByB,MAAK,WAENzB,EAAEa,MAAMa,KAAK,SACDC,MAAM,KACpBC,SAAQ,SAAUC,OACtBA,MAAMC,WAAW,YACjBlB,YAAYmB,KAAKF,aAItBjB,aAEXV,MAAMK,UAAUyB,qBAAuB,WACnC,OAAiD,IAA1ChC,EAAE,6BAA6BiC,QAE1C/B,MAAMK,UAAU2B,WAAa,WACzB,OAAOrB,KAAKV,SAEhBD,MAAMK,UAAU4B,4BAA8B,WAC1CnC,EAAE,sBAAsBoC,IAAI,iBAAiB,SAE1C,CACHC,KAAM,WACF,IAAIC,MAAQ,IAAIpC,MAKhBF,EAAE,oBAAoBuC,MADtBC,qJAGAxC,EAAE,oBAAoBuC,MADG,aAazBvC,EAAE,uBAAuByC,QADzBC,mPAIA1C,EAAE,0BAA0BuC,MADN,uDAetBtC,IAAI0C,YAZU,CAAE,CACRhC,IAAK,gBACLiC,UAAW,aACb,CACEjC,IAAK,gBACLiC,UAAW,aACb,CACEjC,IAAK,cACLiC,UAAW,eAIMC,MAAK,SAAUC,SACpC9C,EAAE,YAAY+C,KAAK,aAAcD,QAAQ,IAAIC,KAAK,QAASD,QAAQ,IACnE9C,EAAE,YAAY+C,KAAK,aAAcD,QAAQ,IAAIC,KAAK,QAASD,QAAQ,IACnE9C,EAAE,iBAAiBgD,KAAKF,QAAQ,OAGhC9C,EAAE,iBAAiBiC,OAAS,IAAMK,MAAMN,wBACxChC,EAAE,qBAAqBS,OACvBT,EAAE,qBAAqBkB,SAEvBlB,EAAE,qBAAqBkB,OACvBlB,EAAE,eAAekB,OACjBlB,EAAE,qBAAqBS,OACvBT,EAAE,qBAAqBkB,QAG3BlB,EAAEiD,UAAUC,OAAM,WACdlD,EAAE,YAAYmD,OAAM,WAChBb,MAAM9B,gBAAe,MAEzBR,EAAE,YAAYmD,OAAM,WAChBb,MAAM9B,gBAAe,MAEzB8B,MAAMH,iCAIVhC,QAAUmC,MAAMJ"}