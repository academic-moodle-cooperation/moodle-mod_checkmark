{"version":3,"file":"checkboxcontroller.min.js","sources":["../src/checkboxcontroller.js"],"sourcesContent":["// This file is part of mod_checkmark for Moodle - http://moodle.org/\n//\n// It is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// It is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * checkboxcontroller.js\n *\n * @module   mod_checkmark/checkboxcontroller\n * @author    Philipp Hager\n * @copyright 2014 Academic Moodle Cooperation {@link http://www.academic-moodle-cooperation.org}\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n /**\n  * @module mod_checkmark/checkboxcontroller\n  */\ndefine(['jquery', 'core/log'], function($, log) {\n\n    /**\n     * @constructor\n     * @alias module:mod_checkmark/checkboxcontroller\n     */\n    var Checkboxcontroller = function() {\n        // Controller ID!\n        this.ID = '';\n        // Table ID!\n        this.table = $('.usersubmissions table.submissions');\n    };\n\n    /**\n     * Function updateSummary() updates the displayed summary during submission edit\n     *\n     * @param {Event} e event object\n     * @return {bool} true if everything's alright (no error handling by now)\n     */\n    Checkboxcontroller.prototype.updateCheckboxes = function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        var type = e.data.type;\n\n        log.info('Update checkboxes (type = ' + type + ')');\n\n        // The .checkboxgroup1 selector is needed so only selection checkboxes are checked or unchecked.\n        if (type == 'all') {\n            $(e.data.inst.table + ' input[type=\"checkbox\"].checkboxgroup1').prop('checked', true);\n        } else if (type == 'none') {\n            $(e.data.inst.table + ' input[type=\"checkbox\"].checkboxgroup1').prop('checked', false);\n        } else {\n            var checkboxes = $(e.data.inst.table + ' input[type=\"checkbox\"].checkboxgroup1');\n\n            checkboxes.each(function(idx, current) {\n                if ($(current).data(type) == 1) {\n                    $(current).prop('checked', true);\n                } else {\n                    $(current).prop('checked', false);\n                }\n            });\n        }\n\n        return true;\n    };\n\n    var instance = new Checkboxcontroller();\n\n    /**\n     * Initializer prepares checkmark-data and registers event-listeners for each checkbox\n     *\n     * @param {array} params contains table and ID selectors\n     * @return {bool} true if everything's ok (no error-handling implemented)\n     */\n    instance.initializer = function(params) {\n        log.debug(\"Init checkboxcontroller (\" + params.id + \")!\\nfor table \" + params.table, 'checkmark');\n\n        if (params.table !== '') {\n            instance.table = params.table;\n        }\n        if (params.id !== '') {\n            instance.id = params.id;\n        } else {\n            instance.id = '';\n        }\n\n        $('#' + instance.id + ' a.all').on('click', null, {inst: this, type: 'all'}, this.updateCheckboxes);\n        $('#' + instance.id + ' a.none').on('click', null, {inst: this, type: 'none'}, this.updateCheckboxes);\n        $('#' + instance.id + ' a.graded').on('click', null, {inst: this, type: 'graded'}, this.updateCheckboxes);\n        $('#' + instance.id + ' a.submitted').on('click', null, {inst: this, type: 'submitted'}, this.updateCheckboxes);\n        $('#' + instance.id + ' a.ungraded').on('click', null, {inst: this, type: 'ungraded'}, this.updateCheckboxes);\n\n        return true;\n    };\n\n    return instance;\n});\n"],"names":["define","$","log","Checkboxcontroller","ID","this","table","prototype","updateCheckboxes","e","preventDefault","stopPropagation","type","data","info","inst","prop","each","idx","current","instance","initializer","params","debug","id","on"],"mappings":";;;;;;;;AA2BAA,OAAM,mCAAC,CAAC,SAAU,aAAa,SAASC,EAAGC,KAMnCC,IAAAA,mBAAqB,WAEhBC,KAAAA,GAAK,GAEVC,KAAKC,MAAQL,EAAE,uCASnBE,mBAAmBI,UAAUC,iBAAmB,SAASC,GACrDA,EAAEC,iBACFD,EAAEE,kBAEF,IAAIC,KAAOH,EAAEI,KAAKD,KAKdA,GAHJV,IAAIY,KAAK,6BAA+BF,KAAO,KAGnC,OAARA,KACAX,EAAEQ,EAAEI,KAAKE,KAAKT,MAAQ,0CAA0CU,KAAK,WAAW,QAC7E,GAAY,QAARJ,KACPX,EAAEQ,EAAEI,KAAKE,KAAKT,MAAQ,0CAA0CU,KAAK,WAAW,OAC7E,CACcf,EAAEQ,EAAEI,KAAKE,KAAKT,MAAQ,0CAE5BW,MAAK,SAASC,IAAKC,SACG,GAAzBlB,EAAEkB,SAASN,KAAKD,MAChBX,EAAEkB,SAASH,KAAK,WAAW,GAE3Bf,EAAEkB,SAASH,KAAK,WAAW,MAKvC,OAAO,GAGX,IAAII,SAAW,IAAIjB,mBA6BnB,OArBAiB,SAASC,YAAc,SAASC,QAkB5B,OAjBApB,IAAIqB,MAAM,4BAA8BD,OAAOE,GAAK,iBAAmBF,OAAOhB,MAAO,aAEhE,KAAjBgB,OAAOhB,QACPc,SAASd,MAAQgB,OAAOhB,OAEV,KAAdgB,OAAOE,GACPJ,SAASI,GAAKF,OAAOE,GAErBJ,SAASI,GAAK,GAGlBvB,EAAE,IAAMmB,SAASI,GAAK,UAAUC,GAAG,QAAS,KAAM,CAACV,KAAMV,KAAMO,KAAM,OAAQP,KAAKG,kBAClFP,EAAE,IAAMmB,SAASI,GAAK,WAAWC,GAAG,QAAS,KAAM,CAACV,KAAMV,KAAMO,KAAM,QAASP,KAAKG,kBACpFP,EAAE,IAAMmB,SAASI,GAAK,aAAaC,GAAG,QAAS,KAAM,CAACV,KAAMV,KAAMO,KAAM,UAAWP,KAAKG,kBACxFP,EAAE,IAAMmB,SAASI,GAAK,gBAAgBC,GAAG,QAAS,KAAM,CAACV,KAAMV,KAAMO,KAAM,aAAcP,KAAKG,kBAC9FP,EAAE,IAAMmB,SAASI,GAAK,eAAeC,GAAG,QAAS,KAAM,CAACV,KAAMV,KAAMO,KAAM,YAAaP,KAAKG,mBAErF,GAGJY"}