{"version":3,"sources":["../src/overrides.js"],"names":["define","$","jqui","str","log","instance","Overrides","table","initializer","config","id","info","get_strings","key","component","done","s","tooltip","items","track","content","element","timeavailable","data","timedue","cutoffdate","attr","fail","ex","error"],"mappings":"AA2BAA,OAAM,2BAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,UAAvB,CAAmC,UAAnC,CAAD,CAAiD,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAAuBC,CAAvB,CAA4B,IAa3EC,CAAAA,CAAQ,CAAG,GAPC,SAAZC,CAAAA,SAAY,EAAW,CAIvB,KAAKC,KAAL,CAAa,EAChB,CAX8E,CAkB/EF,CAAQ,CAACG,WAAT,CAAuB,SAASC,CAAT,CAAiB,CACpC,KAAKF,KAAL,CAAaN,CAAC,CAACQ,CAAM,CAACC,EAAR,CAAd,CAEAN,CAAG,CAACO,IAAJ,CAAS,uBAAT,CAAkC,eAAlC,EAQAR,CAAG,CAACS,WAAJ,CANc,CACV,CAACC,GAAG,CAAE,mBAAN,CAA2BC,SAAS,CAAE,eAAtC,CADU,CAEV,CAACD,GAAG,CAAE,eAAN,CAAuBC,SAAS,CAAE,eAAlC,CAFU,CAGV,CAACD,GAAG,CAAE,SAAN,CAAiBC,SAAS,CAAE,eAA5B,CAHU,CAIV,CAACD,GAAG,CAAE,YAAN,CAAoBC,SAAS,CAAE,eAA/B,CAJU,CAMd,EAAyBC,IAAzB,CAA8B,SAASC,CAAT,CAAY,CAEtCZ,CAAG,CAACO,IAAJ,CAAS,kCAAoCK,CAA7C,CAAgD,eAAhD,EACAZ,CAAG,CAACO,IAAJ,CAAS,oBAAT,CAA+B,eAA/B,EAEAV,CAAC,CAAC,4BAAD,CAAD,CAAgCgB,OAAhC,CAAwC,CACpCC,KAAK,CAAE,kBAD6B,CAEpCC,KAAK,GAF+B,CAGpCC,OAAO,CAAE,UAAW,IACZC,CAAAA,CAAO,CAAGpB,CAAC,CAAC,IAAD,CADC,CAGZqB,CAAa,CAAGD,CAAO,CAACE,IAAR,CAAa,eAAb,CAHJ,CAIZC,CAAO,CAAGH,CAAO,CAACE,IAAR,CAAa,SAAb,CAJE,CAKZE,CAAU,CAAGJ,CAAO,CAACE,IAAR,CAAa,YAAb,CALD,CAOZH,CAAO,CAAG,iCAPE,CAQhBA,CAAO,EAAI,sBAAuBC,CAAO,CAACK,IAAR,CAAa,IAAb,CAAvB,CAA4C,KAAvD,CACAN,CAAO,EAAIJ,CAAC,CAAC,CAAD,CAAZ,CAEA,GAAsB,EAAlB,GAAAM,CAAJ,CAA0B,CACtBF,CAAO,EAAI,gCAAgCJ,CAAC,CAAC,CAAD,CAAjC,CACH,QADG,CACQM,CADR,CACwB,QACtC,CACD,GAAgB,EAAZ,GAAAE,CAAJ,CAAoB,CAChBJ,CAAO,EAAI,0BAA0BJ,CAAC,CAAC,CAAD,CAA3B,CACH,QADG,CACQQ,CADR,CACkB,QAChC,CACD,GAAmB,EAAf,GAAAC,CAAJ,CAAuB,CACnBL,CAAO,EAAI,6BAA6BJ,CAAC,CAAC,CAAD,CAA9B,CACH,QADG,CACQS,CADR,CACqB,QACnC,CAEDL,CAAO,EAAI,QAAX,CAEA,MAAOA,CAAAA,CACV,CA9BmC,CAAxC,CAgCH,CArCD,EAqCGO,IArCH,CAqCQ,SAASC,CAAT,CAAa,CACjBxB,CAAG,CAACyB,KAAJ,CAAU,0BAA4BD,CAAtC,CAA0C,eAA1C,CACH,CAvCD,CAwCH,CAnDD,CAqDA,MAAOvB,CAAAA,CACV,CAxEK,CAAN","sourcesContent":["// This file is part of mod_checkmark for Moodle - http://moodle.org/\r\n//\r\n// It is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// It is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Handles overlays/tooltips in checkmark!\r\n *\r\n * @package   mod_checkmark\r\n * @author    Philipp Hager\r\n * @copyright 2018 Academic Moodle Cooperation {@link http://www.academic-moodle-cooperation.org}\r\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\n/**\r\n * @module mod_checkmark/overrides\r\n */\r\ndefine(['jquery', 'jqueryui', 'core/str', 'core/log'], function($, jqui, str, log) {\r\n\r\n    /**\r\n     * @constructor\r\n     * @alias module:mod_checkmark/overrides\r\n     */\r\n    var Overrides = function() {\r\n        /**\r\n         * @var object table object to use\r\n         */\r\n        this.table = {};\r\n    };\r\n\r\n    var instance = new Overrides();\r\n\r\n    /**\r\n     * Initialises the JavaScript\r\n     */\r\n    instance.initializer = function(config) {\r\n        this.table = $(config.id);\r\n\r\n        log.info('Initialize report JS!', 'mod_checkmark');\r\n\r\n        var tofetch = [\r\n            {key: 'dates_overwritten', component: 'mod_checkmark'},\r\n            {key: 'availabledate', component: 'mod_checkmark'},\r\n            {key: 'duedate', component: 'mod_checkmark'},\r\n            {key: 'cutoffdate', component: 'mod_checkmark'}\r\n        ];\r\n        str.get_strings(tofetch).done(function(s) {\r\n\r\n            log.info('Successfully acquired strings: ' + s, 'mod_checkmark');\r\n            log.info('Register tooltips!', 'mod_checkmark');\r\n\r\n            $('#mod-checkmark-submissions').tooltip({\r\n                items: '.overridetooltip',\r\n                track: true,\r\n                content: function() {\r\n                    var element = $(this);\r\n\r\n                    var timeavailable = element.data('timeavailable');\r\n                    var timedue = element.data('timedue');\r\n                    var cutoffdate = element.data('cutoffdate');\r\n\r\n                    var content = '<div class=\"checkmarkoverlay\"';\r\n                    content += 'aria-describedby=\"' + element.attr('id') + '\">';\r\n                    content += s[0]; // Is string 'dates_overwritten' from 'mod_checkmark'!\r\n\r\n                    if (timeavailable !== '') {\r\n                        content += '<div class=\"timeavailable\">' + s[1] + // Is string 'timeavailable' from 'mod_checkmark']!\r\n                                '&nbsp;' + timeavailable + '</div>';\r\n                    }\r\n                    if (timedue !== '') {\r\n                        content += '<div class=\"timedue\">' + s[2] + // Is string 'timedue' from 'mod_checkmark'!\r\n                                '&nbsp;' + timedue + '</div>';\r\n                    }\r\n                    if (cutoffdate !== '') {\r\n                        content += '<div class=\"cutoffdate\">' + s[3] + // Is string 'cutoffdate' from 'mod_checkmark'!\r\n                                '&nbsp;' + cutoffdate + '</div>';\r\n                    }\r\n\r\n                    content += '</div>';\r\n\r\n                    return content;\r\n                }\r\n            });\r\n        }).fail(function(ex) {\r\n            log.error('Error getting strings: ' + ex, 'mod_checkmark');\r\n        });\r\n    };\r\n\r\n    return instance;\r\n});\r\n"],"file":"overrides.min.js"}