{"version":3,"file":"grading.min.js","sources":["../src/grading.js"],"sourcesContent":["define(['jquery', 'core/str'], function ($, str) {\n\n    var State = function (name,state) {\n        this.name = name;\n        this.state = state;\n    };\n\n    var Grading = function (originalstate) {\n        this.originalState = originalstate;\n    };\n\n    Grading.prototype.toggleOverwiteHint = function (event) {\n        var curHint = $('.' + event.target.id);\n        if(curHint.hasClass('d-none')) {\n            curHint.removeClass(\"d-none\");\n        } else {\n            curHint.addClass(\"d-none\");\n        }\n    };\n    Grading.prototype.calculateSum = function () {\n        var sum = 0;\n        $('input.examplecheck').each(function () {\n            if($(this).is(':checked')) {\n                var classname = $(this).attr('class');\n                var classes = classname.split(' ');\n                classes.forEach(function (value) {\n                    if (value.startsWith(\"$\")) {\n                        sum += parseFloat(value.substring(1));\n                    }\n                });\n            }\n        });\n        return sum;\n    };\n    Grading.prototype.setPoints = function (points) {\n        $('#id_xgrade').val(points);\n        var strings = [\n            {\n                key: 'strautograded',\n                component: 'checkmark'\n            },\n        ];\n        str.get_strings(strings).then(function (results) {\n            $('#id_feedback_editoreditable:first-child').text(results[0]);\n        });\n    };\n\n    Grading.prototype.resetFeedback = function () {\n        $('#id_feedback_editoreditable:first-child').text('');\n    };\n    return {\n        init: function () {\n            var originalState = [];\n            $('.overwritetag').each(function() {\n               originalState.push(new State(this.getAttribute('class'),this.style.display !== 'none'));\n            });\n            var grading = new Grading(originalState);\n            $(document).ready(function () {\n                $('input.examplecheck').change(function (event) {\n                    grading.toggleOverwiteHint(event);\n                    grading.setPoints(grading.calculateSum());\n                });\n                $('#id_xgrade').change(grading.resetFeedback);\n            });\n\n        }\n    };\n});"],"names":["define","$","str","State","name","state","Grading","originalstate","originalState","prototype","toggleOverwiteHint","event","curHint","target","id","hasClass","removeClass","addClass","calculateSum","sum","each","this","is","attr","split","forEach","value","startsWith","parseFloat","substring","setPoints","points","val","get_strings","key","component","then","results","text","resetFeedback","init","push","getAttribute","style","display","grading","document","ready","change"],"mappings":"AAAAA,OAAM,wBAAC,CAAC,SAAU,aAAa,SAAUC,EAAGC,KAExC,IAAIC,MAAQ,SAAUC,KAAKC,OAClBD,KAAAA,KAAOA,KACPC,KAAAA,MAAQA,OAGbC,QAAU,SAAUC,eACfC,KAAAA,cAAgBD,eA0ClB,OAvCPD,QAAQG,UAAUC,mBAAqB,SAAUC,OACzCC,IAAAA,QAAUX,EAAE,IAAMU,MAAME,OAAOC,IAChCF,QAAQG,SAAS,UAChBH,QAAQI,YAAY,UAEpBJ,QAAQK,SAAS,WAGzBX,QAAQG,UAAUS,aAAe,WACzBC,IAAAA,IAAM,EAYV,OAXAlB,EAAE,sBAAsBmB,MAAK,WACtBnB,EAAEoB,MAAMC,GAAG,aACMrB,EAAEoB,MAAME,KAAK,SACLC,MAAM,KACtBC,SAAQ,SAAUC,OAClBA,MAAMC,WAAW,OACjBR,KAAOS,WAAWF,MAAMG,UAAU,WAK3CV,KAEXb,QAAQG,UAAUqB,UAAY,SAAUC,QACpC9B,EAAE,cAAc+B,IAAID,QAOpB7B,IAAI+B,YANU,CACV,CACIC,IAAK,gBACLC,UAAW,eAGMC,MAAK,SAAUC,SACpCpC,EAAE,2CAA2CqC,KAAKD,QAAQ,QAIlE/B,QAAQG,UAAU8B,cAAgB,WAC9BtC,EAAE,2CAA2CqC,KAAK,KAE/C,CACHE,KAAM,WACEhC,IAAAA,cAAgB,GACpBP,EAAE,iBAAiBmB,MAAK,WACrBZ,cAAciC,KAAK,IAAItC,MAAMkB,KAAKqB,aAAa,SAAgC,SAAvBrB,KAAKsB,MAAMC,aAEtE,IAAIC,QAAU,IAAIvC,QAAQE,eAC1BP,EAAE6C,UAAUC,OAAM,WACd9C,EAAE,sBAAsB+C,QAAO,SAAUrC,OACrCkC,QAAQnC,mBAAmBC,OAC3BkC,QAAQf,UAAUe,QAAQ3B,mBAE9BjB,EAAE,cAAc+C,OAAOH,QAAQN"}